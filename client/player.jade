// ****************** MAIN PLAYER LAYOUT TEMPLATE ******************
template(name="player")
  div(class="left")
    +Template.dynamic(template=videoArea)
    +Template.dynamic(template=toolbarArea)
    +Template.dynamic(template=chaptersArea)
  div(class="right")
    +Template.dynamic(template=issueNavArea)
    +Template.dynamic(template=videoNavArea)

// ****************** SUB TEMPLATES ******************
// PLAYER
template(name="html5Player")
  if Template.subscriptionsReady
    video(id="video" type="video/mp4" src="{{videoUrl}}" poster="{{posterImageUrl}}" controls crossOrigin="Anonymous" width="600")
  else Template.subscriptionsReady
    h1 loading ..
    
// Issue (Utgave)
template(name="issueNav")
  div(id="issue-nav")
    div(id="issue-actions")
      button(class="add-issue") Legg til utgave  
      //List of videos
      +each issues
        +issue

template(name="issueItems")
  div(class="issue-select" id="{{_id}}")
    +if frontSplashId
      div
        img(src="{{frontSplashSmall}}" width="100px")
    +else
      div
        img(class="preview" src="images/no-video.jpg" width="100px")
    div(class='title') {{> editableText collection="issues" field="title"}}

// VIDEO NAV
template(name="videoNav")
  div(id="video-nav")
    //Button to add videos
    div(id="video-actions")
      button(class="add-video") Legg til video  
    //List of videos
    +each videos
      +videoNavItem

template(name="videoNavItem")
  div(class="video-select" id="{{_id}}")
    +if splashId
      div
        img(src="{{splashSmall}}" width="100px")
    +else
      div
        img(class="preview" src="/images/no-video.jpg" width="100px")
    div(class='title') {{> editableText collection="videos" field="title"}}
    div(class='filename') {{fileName}}
  div(class="itemActions")
     button(class="remove-video") X

// CHAPTERS
template(name="chapters")
  div(id="chapters")
    +each chapters
      +chapter

template(name="chapter")
  span(class="chapter" style="display: inline-block")
    div
      button(class="delete") X
    +if url store="chapterImage"
      img(src="{{url store='chapterImage'}}")
    +else
      img(src="/uploading.png")
      unless isUploaded
        p(class="uploadProgress") uploading..{{uploadProgress}}%
      else
        p(class="uploadProgress") processing..
    div
      span(class='title') {{> editableText collection="cfs.chapters.filerecord" field="title"}}
      button(class="adjust-time") Time
      button(class="adjust-image") Img

template(name="videoNotFound")
  if Template.subscriptionsReady
    h1 Video ikke funnet
    if videoId
      p GÃ¥ til
        a(href="videoplayer?videoId={{videoId}}") videoavspiller
    button Opprett video
